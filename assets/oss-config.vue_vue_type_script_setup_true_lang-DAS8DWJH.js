import{d as x,a as q,k as D,r as n,o as c,c as E,B as o,A as e,D as s,g,M as f,K as C,E as R,H as F}from"./vlib-DOiUgBZ7.js";import{b as K}from"./index-DVgET6nB.js";const H=x({__name:"oss-config",emits:["refreshDataList"],setup(w,{expose:k,emit:S}){const A=S,i=q(!1),m=q(),u=D({type:0,qiniuDomain:"",qiniuPrefix:"",qiniuAccessKey:"",qiniuSecretKey:"",qiniuBucketName:"",aliyunDomain:"",aliyunPrefix:"",aliyunEndPoint:"",aliyunAccessKeyId:"",aliyunAccessKeySecret:"",aliyunBucketName:"",qcloudDomain:"",qcloudPrefix:"",qcloudAppId:0,qcloudSecretId:"",qcloudSecretKey:"",qcloudBucketName:"",qcloudRegion:""}),v=q({qiniuDomain:[{required:!0,message:"必填项不能为空",trigger:"blur"}],qiniuAccessKey:[{required:!0,message:"必填项不能为空",trigger:"blur"}],qiniuSecretKey:[{required:!0,message:"必填项不能为空",trigger:"blur"}],qiniuBucketName:[{required:!0,message:"必填项不能为空",trigger:"blur"}],aliyunDomain:[{required:!0,message:"必填项不能为空",trigger:"blur"}],aliyunEndPoint:[{required:!0,message:"必填项不能为空",trigger:"blur"}],aliyunAccessKeyId:[{required:!0,message:"必填项不能为空",trigger:"blur"}],aliyunAccessKeySecret:[{required:!0,message:"必填项不能为空",trigger:"blur"}],aliyunBucketName:[{required:!0,message:"必填项不能为空",trigger:"blur"}],qcloudDomain:[{required:!0,message:"必填项不能为空",trigger:"blur"}],qcloudAppId:[{required:!0,message:"必填项不能为空",trigger:"blur"}],qcloudSecretId:[{required:!0,message:"必填项不能为空",trigger:"blur"}],qcloudSecretKey:[{required:!0,message:"必填项不能为空",trigger:"blur"}],qcloudBucketName:[{required:!0,message:"必填项不能为空",trigger:"blur"}],qcloudRegion:[{required:!0,message:"必填项不能为空",trigger:"blur"}]}),B=()=>{i.value=!0,m.value&&m.value.resetFields(),I()},I=()=>{K.get("/sys/oss/info").then(p=>{Object.assign(u,p.data)})},V=()=>{m.value.validate(p=>{if(!p)return!1;K.post("/sys/oss",u).then(l=>{F.success({message:"成功",duration:500,onClose:()=>{i.value=!1,A("refreshDataList")}})})})};return k({init:B}),(p,l)=>{const y=n("el-radio"),N=n("el-radio-group"),t=n("el-form-item"),r=n("el-input"),d=n("el-option"),_=n("el-select"),U=n("el-form"),b=n("el-button"),P=n("el-dialog");return c(),E(P,{modelValue:i.value,"onUpdate:modelValue":l[22]||(l[22]=a=>i.value=a),title:"云存储配置","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:o(()=>[e(b,{onClick:l[20]||(l[20]=a=>i.value=!1)},{default:o(()=>[s("取消")]),_:1}),e(b,{type:"primary",onClick:l[21]||(l[21]=a=>V())},{default:o(()=>[s("确定")]),_:1})]),default:o(()=>[e(U,{model:u,rules:v.value,ref_key:"dataFormRef",ref:m,onKeyup:l[19]||(l[19]=R(a=>V(),["enter"])),"label-width":"140px"},{default:o(()=>[e(t,{label:"类型"},{default:o(()=>[e(N,{modelValue:u.type,"onUpdate:modelValue":l[0]||(l[0]=a=>u.type=a)},{default:o(()=>[e(y,{label:1},{default:o(()=>[s("七牛")]),_:1}),e(y,{label:2},{default:o(()=>[s("阿里云")]),_:1}),e(y,{label:3},{default:o(()=>[s("腾讯云")]),_:1})]),_:1},8,["modelValue"])]),_:1}),u.type===1?(c(),g(f,{key:0},[e(t,{prop:"qiniuDomain",label:"域名"},{default:o(()=>[e(r,{modelValue:u.qiniuDomain,"onUpdate:modelValue":l[1]||(l[1]=a=>u.qiniuDomain=a),placeholder:"七牛绑定的域名"},null,8,["modelValue"])]),_:1}),e(t,{prop:"qiniuPrefix",label:"路径前缀"},{default:o(()=>[e(r,{modelValue:u.qiniuPrefix,"onUpdate:modelValue":l[2]||(l[2]=a=>u.qiniuPrefix=a),placeholder:"不设置默认为空"},null,8,["modelValue"])]),_:1}),e(t,{prop:"qiniuAccessKey",label:"AccessKey"},{default:o(()=>[e(r,{modelValue:u.qiniuAccessKey,"onUpdate:modelValue":l[3]||(l[3]=a=>u.qiniuAccessKey=a),placeholder:"七牛AccessKey"},null,8,["modelValue"])]),_:1}),e(t,{prop:"qiniuSecretKey",label:"SecretKey"},{default:o(()=>[e(r,{modelValue:u.qiniuSecretKey,"onUpdate:modelValue":l[4]||(l[4]=a=>u.qiniuSecretKey=a),placeholder:"七牛SecretKey"},null,8,["modelValue"])]),_:1}),e(t,{prop:"qiniuBucketName",label:"空间名"},{default:o(()=>[e(r,{modelValue:u.qiniuBucketName,"onUpdate:modelValue":l[5]||(l[5]=a=>u.qiniuBucketName=a),placeholder:"七牛存储空间名"},null,8,["modelValue"])]),_:1})],64)):u.type===2?(c(),g(f,{key:1},[e(t,{prop:"aliyunDomain",label:"域名"},{default:o(()=>[e(r,{modelValue:u.aliyunDomain,"onUpdate:modelValue":l[6]||(l[6]=a=>u.aliyunDomain=a),placeholder:"阿里云绑定的域名，如：http://cdn.renren.io"},null,8,["modelValue"])]),_:1}),e(t,{prop:"aliyunPrefix",label:"路径前缀"},{default:o(()=>[e(r,{modelValue:u.aliyunPrefix,"onUpdate:modelValue":l[7]||(l[7]=a=>u.aliyunPrefix=a),placeholder:"不设置默认为空"},null,8,["modelValue"])]),_:1}),e(t,{prop:"aliyunEndPoint",label:"EndPoint"},{default:o(()=>[e(r,{modelValue:u.aliyunEndPoint,"onUpdate:modelValue":l[8]||(l[8]=a=>u.aliyunEndPoint=a),placeholder:"阿里云EndPoint"},null,8,["modelValue"])]),_:1}),e(t,{prop:"aliyunAccessKeyId",label:"AccessKeyId"},{default:o(()=>[e(r,{modelValue:u.aliyunAccessKeyId,"onUpdate:modelValue":l[9]||(l[9]=a=>u.aliyunAccessKeyId=a),placeholder:"阿里云AccessKeyId"},null,8,["modelValue"])]),_:1}),e(t,{prop:"aliyunAccessKeySecret",label:"AccessKeySecret"},{default:o(()=>[e(r,{modelValue:u.aliyunAccessKeySecret,"onUpdate:modelValue":l[10]||(l[10]=a=>u.aliyunAccessKeySecret=a),placeholder:"阿里云AccessKeySecret"},null,8,["modelValue"])]),_:1}),e(t,{prop:"aliyunBucketName",label:"BucketName"},{default:o(()=>[e(r,{modelValue:u.aliyunBucketName,"onUpdate:modelValue":l[11]||(l[11]=a=>u.aliyunBucketName=a),placeholder:"阿里云BucketName"},null,8,["modelValue"])]),_:1})],64)):u.type===3?(c(),g(f,{key:2},[e(t,{prop:"qcloudDomain",label:"域名"},{default:o(()=>[e(r,{modelValue:u.qcloudDomain,"onUpdate:modelValue":l[12]||(l[12]=a=>u.qcloudDomain=a),placeholder:"腾讯云绑定的域名"},null,8,["modelValue"])]),_:1}),e(t,{prop:"qcloudPrefix",label:"路径前缀"},{default:o(()=>[e(r,{modelValue:u.qcloudPrefix,"onUpdate:modelValue":l[13]||(l[13]=a=>u.qcloudPrefix=a),placeholder:"不设置默认为空"},null,8,["modelValue"])]),_:1}),e(t,{prop:"qcloudAppId",label:"AppId"},{default:o(()=>[e(r,{modelValue:u.qcloudAppId,"onUpdate:modelValue":l[14]||(l[14]=a=>u.qcloudAppId=a),placeholder:"腾讯云AppId"},null,8,["modelValue"])]),_:1}),e(t,{prop:"qcloudSecretId",label:"SecretId"},{default:o(()=>[e(r,{modelValue:u.qcloudSecretId,"onUpdate:modelValue":l[15]||(l[15]=a=>u.qcloudSecretId=a),placeholder:"腾讯云SecretId"},null,8,["modelValue"])]),_:1}),e(t,{prop:"qcloudSecretKey",label:"SecretKey"},{default:o(()=>[e(r,{modelValue:u.qcloudSecretKey,"onUpdate:modelValue":l[16]||(l[16]=a=>u.qcloudSecretKey=a),placeholder:"腾讯云SecretKey"},null,8,["modelValue"])]),_:1}),e(t,{prop:"qcloudBucketName",label:"BucketName"},{default:o(()=>[e(r,{modelValue:u.qcloudBucketName,"onUpdate:modelValue":l[17]||(l[17]=a=>u.qcloudBucketName=a),placeholder:"腾讯云BucketName"},null,8,["modelValue"])]),_:1}),e(t,{prop:"qcloudRegion",label:"所属地区"},{default:o(()=>[e(_,{modelValue:u.qcloudRegion,"onUpdate:modelValue":l[18]||(l[18]=a=>u.qcloudRegion=a),clearable:"",placeholder:"请选择",class:"w-percent-100"},{default:o(()=>[e(d,{value:"ap-beijing-1",label:"北京一区（华北）"}),e(d,{value:"ap-beijing",label:"北京"}),e(d,{value:"ap-shanghai",label:"上海（华东）"}),e(d,{value:"ap-guangzhou",label:"广州（华南）"}),e(d,{value:"ap-chengdu",label:"成都（西南）"}),e(d,{value:"ap-chongqing",label:"重庆"}),e(d,{value:"ap-singapore",label:"新加坡"}),e(d,{value:"ap-hongkong",label:"香港"}),e(d,{value:"na-toronto",label:"多伦多"}),e(d,{value:"eu-frankfurt",label:"法兰克福"})]),_:1},8,["modelValue"])]),_:1})],64)):C("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}});export{H as _};
