import{d as x,k as C,x as S,a as U,r,e as z,o as s,g as F,A as t,B as a,D as d,c as i,K as m,E as H,f as R,C as $}from"./vlib-DOiUgBZ7.js";import{u as I}from"./useView-CGRdY_8C.js";import P from"./user-add-or-update-DJa-IFDM.js";import"./quill-BosuxZz1.js";import"./index-DVgET6nB.js";import"./lodash-DNhsom2x.js";const B={class:"mod-sys__user"},T=x({__name:"user",setup(N){const g=C({getDataListURL:"/sys/user/page",getDataListIsPage:!0,deleteURL:"/sys/user",deleteIsBatch:!0,exportURL:"/sys/user/export",dataForm:{username:"",deptId:"",postId:"",gender:""}}),e=C({...I(g),...S(g)}),c=U(),_=f=>{c.value.init(f)};return(f,l)=>{const h=r("el-input"),u=r("el-form-item"),b=r("ren-select"),k=r("ren-dept-tree"),p=r("el-button"),v=r("el-form"),o=r("el-table-column"),y=r("el-tag"),L=r("el-table"),w=r("el-pagination"),D=z("loading");return s(),F("div",B,[t(v,{inline:!0,model:e.dataForm,onKeyup:l[7]||(l[7]=H(n=>e.getDataList(),["enter"]))},{default:a(()=>[t(u,null,{default:a(()=>[t(h,{modelValue:e.dataForm.username,"onUpdate:modelValue":l[0]||(l[0]=n=>e.dataForm.username=n),placeholder:"用户名",clearable:""},null,8,["modelValue"])]),_:1}),t(u,null,{default:a(()=>[t(b,{modelValue:e.dataForm.gender,"onUpdate:modelValue":l[1]||(l[1]=n=>e.dataForm.gender=n),"dict-type":"gender",placeholder:"性别"},null,8,["modelValue"])]),_:1}),t(u,null,{default:a(()=>[t(k,{modelValue:e.dataForm.deptId,"onUpdate:modelValue":l[2]||(l[2]=n=>e.dataForm.deptId=n),placeholder:"选择部门",query:!0},null,8,["modelValue"])]),_:1}),t(u,null,{default:a(()=>[t(p,{onClick:l[3]||(l[3]=n=>e.getDataList())},{default:a(()=>[d("查询")]),_:1})]),_:1}),t(u,null,{default:a(()=>[e.hasPermission("sys:user:save")?(s(),i(p,{key:0,type:"primary",onClick:l[4]||(l[4]=n=>_())},{default:a(()=>[d("新增")]),_:1})):m("",!0)]),_:1}),t(u,null,{default:a(()=>[e.hasPermission("sys:user:delete")?(s(),i(p,{key:0,type:"danger",onClick:l[5]||(l[5]=n=>e.deleteHandle())},{default:a(()=>[d("删除")]),_:1})):m("",!0)]),_:1}),t(u,null,{default:a(()=>[e.hasPermission("sys:user:export")?(s(),i(p,{key:0,type:"info",onClick:l[6]||(l[6]=n=>e.exportHandle())},{default:a(()=>[d("导出")]),_:1})):m("",!0)]),_:1})]),_:1},8,["model"]),R((s(),i(L,{data:e.dataList,border:"",onSelectionChange:e.dataListSelectionChangeHandle,onSortChange:e.dataListSortChangeHandle,style:{width:"100%"}},{default:a(()=>[t(o,{type:"selection","header-align":"center",align:"center",width:"50"}),t(o,{prop:"username",label:"用户名",sortable:"custom","header-align":"center",align:"center"}),t(o,{prop:"deptName",label:"所属部门","header-align":"center",align:"center"}),t(o,{prop:"email",label:"邮箱","header-align":"center",align:"center"}),t(o,{prop:"mobile",label:"手机号",sortable:"custom","header-align":"center",align:"center"}),t(o,{prop:"gender",label:"性别",sortable:"custom","header-align":"center",align:"center"},{default:a(n=>[d($(e.getDictLabel("gender",n.row.gender)),1)]),_:1}),t(o,{prop:"status",label:"状态",sortable:"custom","header-align":"center",align:"center"},{default:a(n=>[n.row.status===0?(s(),i(y,{key:0,size:"small",type:"danger"},{default:a(()=>[d("停用")]),_:1})):(s(),i(y,{key:1,size:"small",type:"success"},{default:a(()=>[d("正常")]),_:1}))]),_:1}),t(o,{prop:"createDate",label:"创建时间",sortable:"custom","header-align":"center",align:"center",width:"180"}),t(o,{label:"操作",fixed:"right","header-align":"center",align:"center",width:"150"},{default:a(n=>[e.hasPermission("sys:user:update")?(s(),i(p,{key:0,type:"primary",link:"",onClick:V=>_(n.row.id)},{default:a(()=>[d("修改")]),_:2},1032,["onClick"])):m("",!0),e.hasPermission("sys:user:delete")?(s(),i(p,{key:1,type:"primary",link:"",onClick:V=>e.deleteHandle(n.row.id)},{default:a(()=>[d("删除")]),_:2},1032,["onClick"])):m("",!0)]),_:1})]),_:1},8,["data","onSelectionChange","onSortChange"])),[[D,e.dataListLoading]]),t(w,{"current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e.pageSizeChangeHandle,onCurrentChange:e.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),t(P,{ref_key:"addOrUpdateRef",ref:c,onRefreshDataList:e.getDataList},null,8,["onRefreshDataList"])])}}});export{T as default};
