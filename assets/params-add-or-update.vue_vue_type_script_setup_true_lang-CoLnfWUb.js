import{d as F,a as p,k as U,r as m,o as $,c as w,B as t,A as o,D as _,E as B,H as D}from"./vlib-DOiUgBZ7.js";import{b as i}from"./index-DVgET6nB.js";const K=F({__name:"params-add-or-update",emits:["refreshDataList"],setup(q,{expose:v,emit:c}){const b=c,s=p(!1),n=p(),a=U({id:"",paramCode:"",paramValue:"",remark:""}),g=p({paramCode:[{required:!0,message:"必填项不能为空",trigger:"blur"}],paramValue:[{required:!0,message:"必填项不能为空",trigger:"blur"}]}),k=r=>{s.value=!0,a.id="",n.value&&n.value.resetFields(),r&&C(r)},C=r=>{i.get(`/sys/params/${r}`).then(e=>{Object.assign(a,e.data)})},f=()=>{n.value.validate(r=>{if(!r)return!1;(a.id?i.put:i.post)("/sys/params",a).then(e=>{D.success({message:"成功",duration:500,onClose:()=>{s.value=!1,b("refreshDataList")}})})})};return v({init:k}),(r,e)=>{const u=m("el-input"),d=m("el-form-item"),y=m("el-form"),V=m("el-button"),x=m("el-dialog");return $(),w(x,{modelValue:s.value,"onUpdate:modelValue":e[6]||(e[6]=l=>s.value=l),title:a.id?"修改":"新增","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[o(V,{onClick:e[4]||(e[4]=l=>s.value=!1)},{default:t(()=>[_("取消")]),_:1}),o(V,{type:"primary",onClick:e[5]||(e[5]=l=>f())},{default:t(()=>[_("确定")]),_:1})]),default:t(()=>[o(y,{model:a,rules:g.value,ref_key:"dataFormRef",ref:n,onKeyup:e[3]||(e[3]=B(l=>f(),["enter"])),"label-width":"120px"},{default:t(()=>[o(d,{prop:"paramCode",label:"编码"},{default:t(()=>[o(u,{modelValue:a.paramCode,"onUpdate:modelValue":e[0]||(e[0]=l=>a.paramCode=l),placeholder:"编码"},null,8,["modelValue"])]),_:1}),o(d,{prop:"paramValue",label:"值"},{default:t(()=>[o(u,{modelValue:a.paramValue,"onUpdate:modelValue":e[1]||(e[1]=l=>a.paramValue=l),placeholder:"值"},null,8,["modelValue"])]),_:1}),o(d,{prop:"remark",label:"备注"},{default:t(()=>[o(u,{modelValue:a.remark,"onUpdate:modelValue":e[2]||(e[2]=l=>a.remark=l),placeholder:"备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{K as _};
