import{d as z,a as V,k as _,x,r as o,e as I,o as s,c as i,B as n,A as t,D as p,E as S,f as j,R as B}from"./vlib-DOiUgBZ7.js";import{u as F}from"./useView-CGRdY_8C.js";import{b as $}from"./index-DVgET6nB.js";const K=z({__name:"schedule-log",setup(E,{expose:f}){const d=V(!1),c=_({getDataListURL:"/sys/scheduleLog/page",getDataListIsPage:!0,dataForm:{jobId:""}}),e=_({...F(c),...x(c)}),b=()=>{d.value=!0,e.getDataList()},h=g=>{$.get(`/sys/scheduleLog/${g}`).then(a=>{B.alert(a.data.error)})};return f({init:b}),(g,a)=>{const C=o("el-input"),u=o("el-form-item"),v=o("el-button"),w=o("el-form"),r=o("el-table-column"),m=o("el-tag"),L=o("el-table"),D=o("el-pagination"),y=o("el-dialog"),k=I("loading");return s(),i(y,{modelValue:d.value,"onUpdate:modelValue":a[3]||(a[3]=l=>d.value=l),title:"日志列表","close-on-click-modal":!1,"close-on-press-escape":!1,width:"75%"},{default:n(()=>[t(w,{inline:!0,model:e.dataForm,onKeyup:a[2]||(a[2]=S(l=>e.getDataList(),["enter"]))},{default:n(()=>[t(u,null,{default:n(()=>[t(C,{modelValue:e.dataForm.jobId,"onUpdate:modelValue":a[0]||(a[0]=l=>e.dataForm.jobId=l),placeholder:"任务ID",clearable:""},null,8,["modelValue"])]),_:1}),t(u,null,{default:n(()=>[t(v,{onClick:a[1]||(a[1]=l=>e.getDataList())},{default:n(()=>[p("查询")]),_:1})]),_:1})]),_:1},8,["model"]),j((s(),i(L,{data:e.dataList,border:"",onSortChange:e.dataListSortChangeHandle,height:"460",style:{width:"100%"}},{default:n(()=>[t(r,{prop:"jobId",label:"任务ID","header-align":"center",align:"center",width:"180"}),t(r,{prop:"beanName",label:"bean名称","header-align":"center",align:"center"}),t(r,{prop:"params",label:"参数","header-align":"center",align:"center"}),t(r,{prop:"status",label:"状态","header-align":"center",align:"center"},{default:n(l=>[l.row.status===1?(s(),i(m,{key:0,size:"small"},{default:n(()=>[p("成功")]),_:1})):(s(),i(m,{key:1,type:"danger",size:"small",onClick:H=>h(l.row.id),style:{cursor:"pointer"}},{default:n(()=>[p("失败")]),_:2},1032,["onClick"]))]),_:1}),t(r,{prop:"times",label:"耗时(单位: 毫秒)","header-align":"center",align:"center"}),t(r,{prop:"createDate",label:"执行时间","header-align":"center",align:"center",width:"180"})]),_:1},8,["data","onSortChange"])),[[k,e.dataListLoading]]),t(D,{"current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e.pageSizeChangeHandle,onCurrentChange:e.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),_:1},8,["modelValue"])}}});export{K as _};
