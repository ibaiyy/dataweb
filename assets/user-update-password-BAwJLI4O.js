import{d as b,z as P,a as m,k as V,y as v,c as y,B as a,E as C,r as l,o as x,A as s,h as k,C as B,D as F,H as S}from"./vlib-DOiUgBZ7.js";import{u as q,b as E}from"./index-DVgET6nB.js";import"./quill-BosuxZz1.js";import"./lodash-DNhsom2x.js";const K=b({__name:"user-update-password",setup(N){const i=P(),u=m(),r=V({password:"",newPassword:"",confirmPassword:""}),w=q(),f=v(()=>w.state.user),c=m({password:[{required:!0,message:"必填项不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"必填项不能为空",trigger:"blur"}],confirmPassword:[{required:!0,message:"必填项不能为空",trigger:"blur"},{validator:(n,e,o)=>{if(r.newPassword!==e)return o(new Error("确认密码与新密码输入不一致"));o()},trigger:"blur"}]}),p=()=>{u.value.validate(n=>{if(!n)return!1;E.put("/sys/user/password",r).then(e=>{S.success({message:"成功",duration:500,onClose:()=>{i.replace("/login")}})})})};return(n,e)=>{const o=l("el-form-item"),d=l("el-input"),_=l("el-button"),g=l("el-form");return x(),y(g,{model:r,rules:c.value,ref_key:"dataFormRef",ref:u,onKeyup:e[3]||(e[3]=C(t=>p(),["enter"])),"label-width":"120px"},{default:a(()=>[s(o,{label:"账号"},{default:a(()=>[k("span",null,B(f.value.username),1)]),_:1}),s(o,{prop:"password",label:"原密码"},{default:a(()=>[s(d,{modelValue:r.password,"onUpdate:modelValue":e[0]||(e[0]=t=>r.password=t),type:"password",placeholder:"原密码"},null,8,["modelValue"])]),_:1}),s(o,{prop:"newPassword",label:"新密码"},{default:a(()=>[s(d,{modelValue:r.newPassword,"onUpdate:modelValue":e[1]||(e[1]=t=>r.newPassword=t),type:"password",placeholder:"新密码"},null,8,["modelValue"])]),_:1}),s(o,{prop:"confirmPassword",label:"确认密码"},{default:a(()=>[s(d,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=t=>r.confirmPassword=t),type:"password",placeholder:"确认密码"},null,8,["modelValue"])]),_:1}),s(o,null,{default:a(()=>[s(_,{type:"primary",onClick:p},{default:a(()=>[F("确定")]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{K as default};
