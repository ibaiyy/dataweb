import{d as C,k as _,x as y,r as l,e as L,o as i,g as x,A as e,B as a,D as s,E as z,f as D,c,C as k}from"./vlib-DOiUgBZ7.js";import{u as S}from"./useView-CGRdY_8C.js";import"./quill-BosuxZz1.js";import"./index-DVgET6nB.js";import"./lodash-DNhsom2x.js";const V={class:"mod-sys__log-operation"},I=C({__name:"log-operation",setup(q){const d=_({getDataListURL:"/sys/log/operation/page",getDataListIsPage:!0,exportURL:"/sys/log/operation/export",dataForm:{status:""}}),t=_({...S(d),...y(d)});return(U,n)=>{const g=l("el-option"),f=l("el-select"),p=l("el-form-item"),u=l("el-button"),h=l("el-form"),o=l("el-table-column"),m=l("el-tag"),b=l("el-table"),w=l("el-pagination"),v=L("loading");return i(),x("div",V,[e(h,{inline:!0,model:t.dataForm,onKeyup:n[3]||(n[3]=z(r=>t.getDataList(),["enter"]))},{default:a(()=>[e(p,null,{default:a(()=>[e(f,{modelValue:t.dataForm.status,"onUpdate:modelValue":n[0]||(n[0]=r=>t.dataForm.status=r),placeholder:"状态",clearable:""},{default:a(()=>[e(g,{label:"失败",value:0}),e(g,{label:"成功",value:1})]),_:1},8,["modelValue"])]),_:1}),e(p,null,{default:a(()=>[e(u,{onClick:n[1]||(n[1]=r=>t.getDataList())},{default:a(()=>[s("查询")]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(u,{type:"info",onClick:n[2]||(n[2]=r=>t.exportHandle())},{default:a(()=>[s("导出")]),_:1})]),_:1})]),_:1},8,["model"]),D((i(),c(b,{data:t.dataList,border:"",onSortChange:t.dataListSortChangeHandle,style:{width:"100%"}},{default:a(()=>[e(o,{prop:"creatorName",label:"用户名","header-align":"center",align:"center"}),e(o,{prop:"operation",label:"用户操作","header-align":"center",align:"center"}),e(o,{prop:"requestUri",label:"请求URI","header-align":"center",align:"center","show-overflow-tooltip":""}),e(o,{prop:"requestMethod",label:"请求方式","header-align":"center",align:"center"}),e(o,{prop:"requestParams",label:"请求参数","header-align":"center",align:"center",width:"150","show-overflow-tooltip":""}),e(o,{prop:"requestTime",label:"请求时长",sortable:"custom","header-align":"center",align:"center"},{default:a(r=>[s(k(`${r.row.requestTime}ms`),1)]),_:1}),e(o,{prop:"status",label:"状态",sortable:"custom","header-align":"center",align:"center"},{default:a(r=>[r.row.status===0?(i(),c(m,{key:0,size:"small",type:"danger"},{default:a(()=>[s("失败")]),_:1})):(i(),c(m,{key:1,size:"small",type:"success"},{default:a(()=>[s("成功")]),_:1}))]),_:1}),e(o,{prop:"ip",label:"操作IP","header-align":"center",align:"center","show-overflow-tooltip":""}),e(o,{prop:"userAgent",label:"用户代理","header-align":"center",align:"center",width:"150","show-overflow-tooltip":""}),e(o,{prop:"createDate",label:"创建时间",sortable:"custom","header-align":"center",align:"center",width:"180"})]),_:1},8,["data","onSortChange"])),[[v,t.dataListLoading]]),e(w,{"current-page":t.page,"page-sizes":[10,20,50,100],"page-size":t.limit,total:t.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:t.pageSizeChangeHandle,onCurrentChange:t.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])}}});export{I as default};
