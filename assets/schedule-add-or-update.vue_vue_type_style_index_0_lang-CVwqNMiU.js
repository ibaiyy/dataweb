import{d as N,a as p,k as C,r as u,o as F,c as U,B as t,A as o,D as b,E as $,H as w}from"./vlib-DOiUgBZ7.js";import{b as i}from"./index-DVgET6nB.js";const H=N({__name:"schedule-add-or-update",emits:["refreshDataList"],setup(B,{expose:_,emit:v}){const V=v,r=p(!1),d=p(),l=C({id:"",beanName:"",params:"",cronExpression:"",remark:"",status:0}),g=p({beanName:[{required:!0,message:"必填项不能为空",trigger:"blur"}],cronExpression:[{required:!0,message:"必填项不能为空",trigger:"blur"}]}),k=s=>{r.value=!0,l.id="",d.value&&d.value.resetFields(),s&&x(s)},x=s=>{i.get(`/sys/schedule/${s}`).then(e=>{Object.assign(l,e.data)})},f=()=>{d.value.validate(s=>{if(!s)return!1;(l.id?i.put("/sys/schedule",l):i.post("/sys/schedule",l)).then(n=>{w.success({message:"成功",duration:500,onClose:()=>{r.value=!1,V("refreshDataList")}})})})};return _({init:k}),(s,e)=>{const n=u("el-input"),m=u("el-form-item"),y=u("el-form"),c=u("el-button"),E=u("el-dialog");return F(),U(E,{modelValue:r.value,"onUpdate:modelValue":e[7]||(e[7]=a=>r.value=a),title:l.id?"修改":"新增","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[o(c,{onClick:e[5]||(e[5]=a=>r.value=!1)},{default:t(()=>[b("取消")]),_:1}),o(c,{type:"primary",onClick:e[6]||(e[6]=a=>f())},{default:t(()=>[b("确定")]),_:1})]),default:t(()=>[o(y,{model:l,rules:g.value,ref_key:"dataFormRef",ref:d,onKeyup:e[4]||(e[4]=$(a=>f(),["enter"])),"label-width":"120px"},{default:t(()=>[o(m,{prop:"beanName",label:"bean名称"},{default:t(()=>[o(n,{modelValue:l.beanName,"onUpdate:modelValue":e[0]||(e[0]=a=>l.beanName=a),placeholder:"spring bean名称, 如: testTask"},null,8,["modelValue"])]),_:1}),o(m,{prop:"params",label:"参数"},{default:t(()=>[o(n,{modelValue:l.params,"onUpdate:modelValue":e[1]||(e[1]=a=>l.params=a),placeholder:"参数"},null,8,["modelValue"])]),_:1}),o(m,{prop:"cronExpression",label:"cron表达式"},{default:t(()=>[o(n,{modelValue:l.cronExpression,"onUpdate:modelValue":e[2]||(e[2]=a=>l.cronExpression=a),placeholder:"如: 0 0 12 * * ?"},null,8,["modelValue"])]),_:1}),o(m,{prop:"remark",label:"备注"},{default:t(()=>[o(n,{modelValue:l.remark,"onUpdate:modelValue":e[3]||(e[3]=a=>l.remark=a),placeholder:"备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{H as _};
