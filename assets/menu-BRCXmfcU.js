import{d as x,k as g,x as D,a as R,r as s,e as $,o as n,g as f,A as a,B as e,c as l,D as i,K as p,E as B,f as T,h as U}from"./vlib-DOiUgBZ7.js";import{u as V}from"./useView-CGRdY_8C.js";import{_ as N}from"./menu-add-or-update.vue_vue_type_style_index_0_lang-kNiy1d8i.js";import"./quill-BosuxZz1.js";import"./index-DVgET6nB.js";import"./lodash-DNhsom2x.js";const P={class:"mod-sys__menu"},H={class:"iconfont","aria-hidden":"true"},K=["xlink:href"],O={key:0},G=x({__name:"menu",setup(E){const y=g({getDataListURL:"/sys/menu/list",deleteURL:"/sys/menu"}),o=g({...V(y),...D(y)}),u=R(),h=d=>{u.value.init(d)},w=d=>{u.value.init2(d)};return(d,c)=>{const m=s("el-button"),v=s("el-form-item"),b=s("el-form"),r=s("el-table-column"),_=s("el-tag"),C=s("el-table"),L=$("loading");return n(),f("div",P,[a(b,{inline:!0,model:o.dataForm,onKeyup:c[1]||(c[1]=B(t=>o.getDataList(),["enter"]))},{default:e(()=>[a(v,null,{default:e(()=>[o.hasPermission("sys:menu:save")?(n(),l(m,{key:0,type:"primary",onClick:c[0]||(c[0]=t=>h())},{default:e(()=>[i("新增")]),_:1})):p("",!0)]),_:1})]),_:1},8,["model"]),T((n(),l(C,{data:o.dataList,"show-overflow-tooltip":"","row-key":"id",border:"",style:{width:"100%"}},{default:e(()=>[a(r,{prop:"name",label:"名称","header-align":"center","min-width":"150"}),a(r,{prop:"icon",label:"图标","header-align":"center",align:"center"},{default:e(t=>[(n(),f("svg",H,[U("use",{"xlink:href":`#${t.row.icon}`},null,8,K)]))]),_:1}),a(r,{prop:"menuType",label:"类型","header-align":"center",align:"center"},{default:e(t=>[t.row.menuType===0?(n(),l(_,{key:0},{default:e(()=>[i("菜单")]),_:1})):(n(),l(_,{key:1,type:"info"},{default:e(()=>[i("按钮")]),_:1}))]),_:1}),a(r,{prop:"openStyle",label:"打开方式","header-align":"center",align:"center"},{default:e(t=>[t.row.menuType!==0?(n(),f("span",O)):t.row.openStyle===1?(n(),l(_,{key:1},{default:e(()=>[i("外部打开")]),_:1})):(n(),l(_,{key:2,type:"info"},{default:e(()=>[i("内部打开")]),_:1}))]),_:1}),a(r,{prop:"sort",label:"排序","header-align":"center",align:"center"}),a(r,{prop:"url",label:"路由","header-align":"center",align:"center",width:"150"}),a(r,{prop:"permissions",label:"授权标识","header-align":"center",align:"center",width:"150"}),a(r,{label:"操作",fixed:"right","header-align":"center",align:"center",width:"170"},{default:e(t=>[o.hasPermission("sys:menu:save")&&t.row.menuType===0?(n(),l(m,{key:0,type:"primary",link:"",onClick:k=>w(t.row)},{default:e(()=>[i("新增")]),_:2},1032,["onClick"])):p("",!0),o.hasPermission("sys:menu:update")?(n(),l(m,{key:1,type:"primary",link:"",onClick:k=>h(t.row.id)},{default:e(()=>[i("修改")]),_:2},1032,["onClick"])):p("",!0),o.hasPermission("sys:menu:delete")?(n(),l(m,{key:2,type:"primary",link:"",onClick:k=>o.deleteHandle(t.row.id)},{default:e(()=>[i("删除")]),_:2},1032,["onClick"])):p("",!0)]),_:1})]),_:1},8,["data"])),[[L,o.dataListLoading]]),a(N,{ref_key:"addOrUpdateRef",ref:u,onRefreshDataList:o.getDataList},null,8,["onRefreshDataList"])])}}});export{G as default};
